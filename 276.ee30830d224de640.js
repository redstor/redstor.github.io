"use strict";(self.webpackChunkchallenge=self.webpackChunkchallenge||[]).push([[276],{3276:(O,h,t)=>{t.r(h),t.d(h,{SearchModule:()=>N});var l=t(6895),p=t(2295),g=t(2101),u=t(9653),v=t(5698),y=t(9300),n=t(4650),x=t(3940),r=t(4006),C=t(8372),F=t(1884),T=t(727),i=t(7392),m=t(9549),Z=t(4144);let I=(()=>{class o{constructor(){this.subscriptions=new T.w0,this.newSearch=new n.vpe,this.searchForm=new r.cw({search:new r.NI("",r.kI.minLength(3))})}ngOnInit(){this.subscriptions.add(this.searchForm.controls?.search?.valueChanges.pipe((0,C.b)(400),(0,F.x)()).subscribe(e=>this.newSearch.emit(e??"")))}handleEnter(){this.newSearch.emit(this.searchForm.controls?.search?.value??"")}ngOnDestroy(){this.subscriptions.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-search-input"]],inputs:{icon:"icon",placeholder:"placeholder"},outputs:{newSearch:"newSearch"},decls:5,vars:3,consts:[[1,"search-form",3,"formGroup","keyup.enter"],["appearance","outline"],["matSuffix",""],["matInput","","type","text","formControlName","search"]],template:function(e,a){1&e&&(n.TgZ(0,"form",0),n.NdJ("keyup.enter",function(){return a.handleEnter()}),n.TgZ(1,"mat-form-field",1)(2,"mat-icon",2),n._uU(3),n.qZA(),n._UZ(4,"input",3),n.qZA()()),2&e&&(n.Q6J("formGroup",a.searchForm),n.xp6(3),n.Oqu(a.icon||"search"),n.xp6(1),n.uIk("placeholder",a.placeholder||"search a photo..."))},dependencies:[i.Hw,m.KE,m.R9,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,Z.Nt],encapsulation:2,changeDetection:0}),o})();var d=t(8317),c=t(9671),f=t(7296);function J(o,s){if(1&o&&(n.ynx(0),n.TgZ(1,"app-photo-list-item",4)(2,"div",5)(3,"p")(4,"mat-icon",6),n._uU(5,"favorite"),n.qZA(),n._uU(6),n.qZA()()(),n.BQk()),2&o){const e=s.$implicit;n.xp6(1),n.Q6J("photo_url",e.urls.small)("photo_description",e.alt_description)("routerLink","/collections/photo/"+e.id),n.xp6(5),n.hij(" ",e.likes," likes ")}}let L=(()=>{class o{constructor(e){this.store=e,this.results$=this.store.pipe((0,u.Ys)(g.pF.dP))}handleSearch(e){this.store.dispatch(p.PC.newSearch({searchKey:e}))}onScrollDown(){this.results$.pipe((0,v.q)(1),(0,y.h)(e=>!!e?.length)).subscribe(()=>this.store.dispatch(p.PC.loadMoreSearchItems()))}}return o.\u0275fac=function(e){return new(e||o)(n.Y36(u.yh))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-search"]],decls:5,vars:5,consts:[[1,"layout-container"],[3,"newSearch"],["fxLayout.sm","column","fxLayout.gt-sm","row wrap","infiniteScroll","",1,"gallery",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],[4,"ngFor","ngForOf"],["fxFlex","","fxFlex.gt-sm","28","fxFlex.gt-lg","20",3,"photo_url","photo_description","routerLink"],["fxLayout","row","fxLayoutAlign","end","fxLayoutGap","12px"],["inline",""]],template:function(e,a){1&e&&(n.TgZ(0,"div",0)(1,"app-search-input",1),n.NdJ("newSearch",function(D){return a.handleSearch(D)}),n.qZA(),n.TgZ(2,"div",2),n.NdJ("scrolled",function(){return a.onScrollDown()}),n.YNc(3,J,7,4,"ng-container",3),n.ALo(4,"async"),n.qZA()()),2&e&&(n.xp6(2),n.Q6J("infiniteScrollDistance",1)("infiniteScrollThrottle",2e3),n.xp6(1),n.Q6J("ngForOf",n.lcZ(4,3,a.results$)))},dependencies:[l.sg,x.o,I,d.rH,i.Hw,c.xw,c.SQ,c.Wh,c.yH,f.Ry,l.Ov],encapsulation:2}),o})();var A=t(5626);const w=[{path:"",component:L,data:{breadcrumb:"search"}}];let N=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[l.ez,A.K,d.Bz.forChild(w),i.Ps,c.ae,f.Rq]}),o})()}}]);